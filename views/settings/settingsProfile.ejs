<section class="settings-section">

    <ul class="flash-settings">
        <% for (let val of error_msg) {%>
            <li class="flash-style f-error">
                    <div class="flash-info">
                        <span><strong>Error</strong></span>
                        <span><%=val.msg%></span>
                    </div>
                    <div class="flash-close"><img src="/assets/icons/icons8-delete-96.png"/></div>
            </li>
        <% } %>
        <% for (let val of success_msg) {%>
            <li class="flash-style f-success">
                    <div class="flash-info">
                        <span><strong>Success</strong></span>
                        <span><%=val.msg%></span>
                    </div>
                    <div class="flash-close"><img src="/assets/icons/icons8-delete-96.png"/></div>
            </li>
        <% } %>        
    </ul>
    <div class="settings-wrapper">

        <div class="settings-selection">                
                <a class="sttng-select" href="/users/settings?tab=profile"><img src="#" alt="profile"/><span>Profile</span></a>
                <a href="/users/settings?tab=account"><img src="#" alt="Account Settings"/><span>Account Settings</span></a>
        </div>

        <div class="settings-options">
            <div>
                <span class="settings-sub-heading">Profile</span>
            </div>
            <!-- Avatar change -->
            <div class="avatar-change">
                <div class="set-avatar-formOne">
                        <div class="set-avatar-display">
                                <div class="set-avatar-img-wrap">
                                    <img src="/publicAvatar/<%=User.email%>"/>
                                </div>
                                <span><%=User.fullNameDisplay%></span>
                            </div>
                            <span id="set-changeAvatar" class="set-edit">Change profile picture</span>
                </div>

                <div class="set-avatarChange-form">
                    <form id="" method="POST" action="/users/change_avatar" enctype="multipart/form-data">
                        <input class="" id="" type="file" name="avatar"/>
                        <button class="" type="" id="">Update</button>
                    </form>
                </div>
            </div>
            <!-- Personal information -->
            <div class="personal-info">
                <span class="settings-sub-heading">Personal Information</span>
                    <form class="personal-info-form" method="POST" action="/users/change_personalInfo">
                        <div class="personal-info-div">
                                <div class="personal-info-input">
                                    <label for="firstName">First Name</label>
                                    <input id="firstName" type="text" name="firstName" placeholder="<%=User.firstName%>"/>
                                </div>
            
                                <div class="personal-info-input">
                                    <label for="lastName">Last Name</label>
                                    <input id="lastName" type="text" name="lastName" placeholder="<%=User.lastName%>"/>
                                </div>
                        </div>
                        <div class="personal-info-div">
                            <div class="personal-info-input">
                                <label for="emailDisplay">Display email</label>
                                <input id="emailDisplay" type="email" name="emailDisplay" placeholder="<%=User.emailDisplay%>"/>
                            </div>
                            <div class="personal-info-input">
                                <label for="phoneNumber">Phone Number</label>
                                <input id="phoneNumber" type="number" name="phoneNumber" placeholder="<%=User.phone%>"/>
                            </div>
                            <div class="personal-info-save">
                                <button id="pInfo-save" type="submit" disabled>Save</button>
                            </div>
                        </div>
                    </form>
            </div>

            <!-- About You -->
            <div>
                <span class="settings-sub-heading">About You</span>
                <div>
                    <form class="aboutYou-info-form" method="POST" action="/users/change_aboutYou">
                            <div class="aboutYou-info-div">
                                    <div class="aboutYou-info-input">
                                        <label for="country">Country</label>
                                        <select name='country'>
                                                <option value="" disabled selected hidden>Select your option</option>
                                                <% for(let val of selectCountry) {%>
                                                    <option value="<%= val %>"><%= val%></option>
                                                <% } %>
                            
                                        </select>
                                    </div>
                                    <div class="aboutYou-info-input">
                                            <label for="postalCode-setting">Postal Code</label>
                                            <input id="postalCode-setting" type="text" name="postalCode" placeholder="<%=User.postalCode%>"/>
                                    </div>
                            </div>
                            <div class="aboutYou-info-div">
                                <div class="aboutYou-info-input">
                                    <label for="occupation-setting">Occupation</label>
                                    <select name='occupation'>
                                            <option value="" disabled selected hidden>Select your option</option>
                                            <% for(let val of selectCountry) {%>
                                                <option value="<%= val %>"><%= val%></option>
                                            <% } %>
                                    </select>
                                </div>
                                <div class="aboutYou-info-input">
                                        <label for="bio-setting">Bio</label>
                                        <textarea name="bio" maxlength="160" placeholder="<%=User.bio%>"></textarea>
                                        <p>Max: 160</p>
                                </div>
                                <div class="aboutYou-info-save">
                                    <button  id="aboutYou-save" disabled type="submit">Save</button>
                                </div>
                            </div>
                    </form>
                </div>
            </div>

        </div>

    </div>

</section>

<script>

    $(`#set-changeAvatar`).on("click", ()=> {
        $(`.set-avatarChange-form`).toggle();
    });

    $(".personal-info-input > input").on("focus", ()=> {
        $("#pInfo-save").prop("disabled", false);
    });

    $(".aboutYou-info-input > input, .aboutYou-info-input > textarea, .aboutYou-info-input > select ").on("focus", ()=> {
        $("#aboutYou-save").prop("disabled", false);
    })

</script>