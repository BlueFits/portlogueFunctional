<section id="discoverSection">

    <nav class="discover-nav">
                    <ul>
                        <li><a href="/discover/new">New</a></li>
                        <li><a href="/discover/highest_rated">Highest Rated</a></li>
                        <li><a href="/discover/most_viewed">Most Viewed</a></li>
                        <li><a href="/discover/friends">Friends</a></li>
                    </ul>
    </nav>
        <div class="discover-results">
        <ul class="discover-results-ul" id="userQry"><!-- Custom Limited-->
            <% for(let user of qUsers) { %>
                <li class="portfolio-select"><a target="_top" href="/users/profile/<%=user.username%>">
                    <div class="portfolio-thumbnail">
                        <div class="portfolio-thumbnail-bar"><!--Grey bar--></div>
                        <div><img class="portfolio-thumbnail-img" src="/userWebThumb/<%=user.email%>"/></div>
                    </div></a>
                    <div class="thumbnail-desc">
                        <div class="profile-name-wrapper">
                            <div class="thumb-profile-wrapper"><img class="thumbnail-profile-img" src="/publicAvatar/<%=user.email%>"/></div>
                            <a href="/users/profile/<%=user.username%>"><%=user.fullNameDisplay%></a>
                        </div>
                        <span class="occupation-flex"><%=user.occupation%></span>
                    </div>
                </li>
            <% } %>
</ul>

    <div class="pageControl">
        <form method="POST" action="/newQryBack">
            <input type="hidden" value="<%=page%>" name="pageNumber"/>
            <button class="prevPag" type="submit">Back</button>
        </form>


        <form method="POST" action="/newQryNext">
            <input type="hidden" value="<%=page%>" name="pageNumber"/>
            <button class="nextPag" type="submit" <%=qryNextStat%>>Next</button>
        </form>
    </div>

</div>

</section>


<script>

    let generalCounter = 11;
    
    let qUsers = <%- JSON.stringify(qUsers) %>;
    
    $(`#loadMoreButton`).on(`click`, function() {
        generalCounter++
    
        let newDisplay = [];
        
        for (let i = 0; i < 10; i++) {
                        newDisplay.push( `<li class="portfolio-select"><a target="_top" href="/users/profile/${qUsers[i].username}">
                        <div class="portfolio-thumbnail">
                            <div class="portfolio-thumbnail-bar"><!--Grey bar--></div>
                            <div><img class="portfolio-thumbnail-img" src="/userWebThumb/${qUsers[i].email}"/></div>
                        </div></a>
                        <div class="thumbnail-desc">
                            <div class="profile-name-wrapper">
                                <div class="thumb-profile-wrapper"><img class="thumbnail-profile-img" src="/publicAvatar/${qUsers[i].email}"/></div>
                                <a href="/users/profile/${qUsers[i].username}">${qUsers[i].fullNameDisplay}</a>
                            </div>
                            <span class="occupation-flex">${qUsers[i].occupation}</span>
                        </div>
                    </li>`);
                    }
        let content = newDisplay.join('');
    
        let toAppend = document.createElement(`LI`);
        toAppend.innerHTML = content;
    
        let att = document.createAttribute("class");
        att.value= "portfolio-select";
    
        toAppend.setAttribute(att);
    
        $(`#userQry`).append(toAppend);
    })
    
    
    
    </script>